(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{670:function(s,a,t){"use strict";t.r(a);var e=t(19),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[t("img",{attrs:{src:"https://gitee.com/Kabobi/imgs/raw/master/sass-1.jpg",alt:"sass-1"}})]),s._v(" "),t("h2",{attrs:{id:"为什么要将-node-sass-替换成-dart-sass"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为什么要将-node-sass-替换成-dart-sass"}},[s._v("#")]),s._v(" 为什么要将 node-sass 替换成 dart-sass ?")]),s._v(" "),t("p",[s._v("Sass 官方已停止 node-sass 的更新，转而维护 dart-sass 了，因为 node-sass 是通过调用 LibSass 而实现的，而 LibSass 有些依赖在某些环境是缺失的，需要去环境中添加依赖，还有一些需要的二进制文件国内访问不到，导致文件下载不下来，所以 node-sass 经常会有下载问题存在。具体可以查看官方公告: "),t("a",{attrs:{href:"https://sass-lang.com/blog/libsass-is-deprecated",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://sass-lang.com/blog/libsass-is-deprecated"),t("OutboundLink")],1),s._v("。")]),s._v(" "),t("h2",{attrs:{id:"删除-node-sass"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除-node-sass"}},[s._v("#")]),s._v(" 删除 node-sass")]),s._v(" "),t("div",{staticClass:"language-diff line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-diff"}},[t("code",[t("span",{pre:!0,attrs:{class:"token deleted-sign deleted"}},[t("span",{pre:!0,attrs:{class:"token prefix deleted"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token line"}},[s._v(' "node-sass": "^4.9.0"\n')])])])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"替换-dart-sass"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#替换-dart-sass"}},[s._v("#")]),s._v(" 替换 dart-sass")]),s._v(" "),t("p",[s._v("由于 node-sass 和 dart-sass 的配置一样，所以只需删除 node-sass 后重启项目即可。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --save-dev sass\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启项目")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("重新启动项目发现报错")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/Kabobi/imgs/raw/master/Snipaste_2022-02-16_23-37-35.png",alt:""}})]),s._v(" "),t("p",[s._v("因为 Sass 新版本不支持直接使用 “ / ” 作为除法，因为会混淆一些 Sass 的独有语法，所以需要使用 calc 函数来计算，或者使用 Sass 提供的 math.div 函数 ，再或者使用低版本的 Sass。\n如果项目中有大量类似问题需要解决怎么办？Sass 官方提供 sass-migrator 进行匹配替换。")]),s._v(" "),t("h2",{attrs:{id:"sass-migrator"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sass-migrator"}},[s._v("#")]),s._v(" sass-migrator")]),s._v(" "),t("h3",{attrs:{id:"安装-sass-migrator"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-sass-migrator"}},[s._v("#")]),s._v(" 安装 sass-migrator")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g sass-migrator\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"使用-sass-migrator"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-sass-migrator"}},[s._v("#")]),s._v(" 使用 sass-migrator")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 进入需要替换的项目文件夹，记得绕过 node_modules")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 执行 sass-migrator 进行替换")]),s._v("\nsass-migrator division **/*.scss\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ！这里 division 是指替换的类型，**/*.scss 是文件路径")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更多替换类型请查看官方文档: https://sass-lang.com/documentation/cli/migrator")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("替换完成后重新启动")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/Kabobi/imgs/raw/master/image-20220215150200289.png",alt:"image-20220215150200289"}})]),s._v(" "),t("p",[s._v("启动后发现 /deep/ 语法也不支持，全局替换成 ::v-deep ，替换后报错也消失了，至此升级完成。")])])}),[],!1,null,null,null);a.default=r.exports}}]);